<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é¦™æ¸¯æœ¬åœ°è‡ªæ®ºæ–°èç›£æ¸¬ç«™ (HK01/æ±ç¶²/æ˜Ÿå³¶ - å¼·åŒ–ç‰ˆ)</title>
    
    <style>
        /* --- General Reset & Typography --- */
        body {
            font-family: "PingFang TC", "Helvetica Neue", Helvetica, Arial, sans-serif;
            background-color: #f4f7f9; 
            color: #2c3e50;
            margin: 0;
            padding: 0;
            line-height: 1.6;
            scroll-behavior: smooth; 
        }

        /* --- Alert Bar (Mandatory Safety) --- */
        .alert-bar {
            background-color: #e74c3c;
            color: white;
            text-align: center;
            padding: 12px;
            font-size: 1rem;
            font-weight: 700;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.15);
        }
        
        /* --- Header & Title --- */
        .header {
            text-align: center;
            padding: 30px 20px 20px;
            background: white;
            margin-bottom: 25px;
            box-shadow: 0 1px 4px rgba(0, 0, 0, 0.05); 
            position: relative; 
        }
        .header h1 { margin: 0 0 5px 0; font-size: 2.2rem; font-weight: 800; }
        .header .meta { 
            color: #7f8c8d;
            font-size: 0.95rem;
            font-style: italic;
        }

        /* ----------------------------------- */
        /* --- å³ä¸Šè§’è³‡è¨Šå°å·¥å…·æ¨£å¼ --- */
        /* ----------------------------------- */
        .info-widget {
            position: absolute;
            top: 20px;
            right: 20px;
            text-align: right;
            color: #34495e;
            font-size: 0.95rem;
            line-height: 1.5;
            z-index: 5;
            font-weight: 600;
        }
        .info-widget .date-time {
            font-weight: 700;
            font-size: 1.1rem;
            margin-bottom: 5px;
        }
        .info-widget .weather {
            font-size: 0.9rem;
            color: #7f8c8d;
            border-bottom: 2px solid #3498db;
            padding-bottom: 3px;
        }
        /* ----------------------------------- */


        /* --------------------------------- */
        /* --- ç¯©é¸èˆ‡æ’åºæ§åˆ¶é …æ¨£å¼ (å«é‡ç½®æŒ‰éˆ•) --- */
        /* --------------------------------- */
        .controls {
            margin: 20px 0;
            padding: 15px 0;
            border-top: 1px solid #e0e6ed;
            border-bottom: 1px solid #e0e6ed;
            display: flex;
            justify-content: center;
            align-items: center; 
            gap: 25px;
            flex-wrap: wrap;
        }

        .controls label {
            font-weight: 700;
            color: #34495e;
            margin-right: 5px;
            align-self: center;
        }

        .controls select, .controls input[type="text"] {
            padding: 10px 12px;
            border-radius: 6px; 
            border: 1px solid #c7d1da;
            background-color: white;
            font-size: 1rem;
            min-width: 130px;
            flex-grow: 1; 
            max-width: 320px;
            transition: border-color 0.2s, box-shadow 0.2s, background-color 0.2s; 
            box-sizing: border-box;
        }
        .controls select:focus, .controls input[type="text"]:focus {
            border-color: #3498db;
            outline: none;
        }
        
        /* ğŸš¥ Active Filter Indicator */
        .controls select.active-control, 
        .controls input[type="text"].active-control {
            border-color: #3498db;
            box-shadow: 0 0 8px rgba(52, 152, 219, 0.6); 
            background-color: #ecf6ff; 
        }

        /* âŒ æœç´¢æ¬„æ¸…ç©ºæŒ‰éˆ•å®¹å™¨ */
        .search-wrapper {
            position: relative;
            flex-grow: 1; 
            max-width: 320px;
        }
        .search-wrapper input {
            width: 100%;
        }
        .clear-button {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: #95a5a6;
            font-weight: bold;
            cursor: pointer;
            padding: 5px;
            line-height: 1;
            font-size: 1.2rem;
            visibility: hidden; 
        }
        .clear-button:hover {
            color: #34495e;
        }
        .clear-button.visible {
            visibility: visible;
        }

        /* ğŸ”„ ç¯©é¸é‡ç½®æŒ‰éˆ• */
        .reset-button {
            background-color: #7f8c8d;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 6px;
            font-size: 1rem;
            font-weight: 700;
            cursor: pointer;
            transition: background-color 0.2s;
            margin-left: 10px;
        }
        .reset-button:hover {
            background-color: #95a5a6;
        }
        /* --------------------------------- */


        /* --- Layout Grid --- */
        .container {
            max-width: 1400px;
            margin: 0 auto 40px;
            padding: 0 20px;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px; 
        }

        /* --- Source Column & Header --- */
        .source-column {
            background: white;
            border-radius: 12px; 
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05), 0 10px 20px rgba(0, 0, 0, 0.08); 
            transition: transform 0.3s ease;
        }
        
        .source-column:hover {
            transform: translateY(-3px); 
        }

        .column-header {
            padding: 18px 15px;
            color: white;
            font-weight: 700;
            font-size: 1.4rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        /* åª’é«”ä¸»é¡Œè‰² */
        .header-hk01 { background-color: #34495e; } 
        .header-oncc { background-color: #f39c12; } 
        .header-singtao { background-color: #e74c3c; } 

        .news-list {
            padding: 20px;
            min-height: 250px;
        }

        /* --- News Item Card (ç°¡æ½”åˆ—è¡¨æ¨£å¼) --- */
        .news-item {
            display: block;
            padding: 15px 5px;
            margin-bottom: 12px;
            border-bottom: 1px solid #f0f0f0; 
            text-decoration: none;
            color: #2c3e50;
            transition: background-color 0.2s ease, box-shadow 0.2s ease, transform 0.2s ease;
            border-radius: 4px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05); 
        }
        
        .news-item:hover {
            background-color: #f0f0f0; 
            transform: translateY(-2px); 
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.12); 
            cursor: pointer;
        }

        .news-item:hover .news-title { 
            color: #3498db; 
            text-decoration: underline;
        }

        .news-item:last-child { border-bottom: none; margin-bottom: 0; }


        /* --- ğŸ¨ éª¨æ¶å± Skeleton Screen START --- */
        .skeleton-item {
            padding: 15px 5px;
            margin-bottom: 12px;
            border-bottom: 1px solid #f0f0f0; 
        }
        .skeleton-line {
            background-color: #e9ecef;
            height: 10px;
            border-radius: 3px;
            margin-bottom: 8px;
            animation: pulse 1.5s infinite ease-in-out;
        }
        .skeleton-line.short { width: 40%; height: 8px; margin-top: 10px; }
        .skeleton-line.medium { width: 70%; }
        .skeleton-line.long { width: 95%; }

        @keyframes pulse {
            0% { opacity: 0.6; }
            50% { opacity: 0.9; }
            100% { opacity: 0.6; }
        }
        /* --- éª¨æ¶å± Skeleton Screen END --- */

        
        /* --- æ—¥æœŸ/æ¨™ç±¤ & æ¨™é¡Œ (ä¿æŒä¸è®Š) --- */
        .news-date {
            font-size: 0.9rem;
            font-weight: 600;
            color: #555;
            display: flex; 
            flex-wrap: wrap; 
            align-items: center;
            margin-bottom: 10px; 
            gap: 8px; 
        }
        .absolute-time {
            font-size: 0.85rem; 
            color: #95a5a6;
            font-weight: normal; 
        }
        .news-title {
            font-size: 1.4rem;
            font-weight: 700;
            line-height: 1.4;
            margin-top: 5px;
        }
        /* --- ç‹€æ…‹æ¨™è¨˜ (ä¿æŒä¸è®Š) --- */
        .status-tag {
            font-size: 0.9rem;
            font-weight: 700;
            padding: 3px 8px;
            border-radius: 4px;
            white-space: nowrap;
            color: #1c1c1c; 
        }
        .tag-death { background-color: #f7a2a2; } 
        .tag-attempt { background-color: #a4e6b7; } 
        .tag-ambiguous { background-color: #fce7a2; } 
        .tag-district {
            background-color: #dbe9f5; 
            color: #34495e;
            font-weight: 700;
        }
        .tag-unknown {
            background-color: #ecf0f1; 
            color: #7f8c8d;
        }

        .loading, .empty, .error {
            text-align: center;
            padding: 50px 20px;
            color: #95a5a6;
            font-size: 1rem;
        }
        
        /* --------------------------------- */
        /* --- â¬†ï¸ ã€Œè¿”å›é ‚éƒ¨ã€æµ®å‹•æŒ‰éˆ• --- */
        /* --------------------------------- */
        .back-to-top {
            display: none; 
            position: fixed;
            bottom: 25px;
            right: 25px;
            z-index: 99;
            background-color: #3498db;
            color: white;
            border: none;
            border-radius: 50%;
            width: 45px;
            height: 45px;
            font-size: 1.5rem;
            line-height: 45px;
            text-align: center;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            transition: opacity 0.3s;
        }
        .back-to-top:hover {
            background-color: #2980b9;
        }
        .back-to-top.visible {
            display: block;
        }

        
        /* --------------------------------- */
        /* --- éŸ¿æ‡‰å¼è¨­è¨ˆ (RWD) å„ªåŒ– --- */
        /* --------------------------------- */
        @media (max-width: 768px) {
            .container {
                grid-template-columns: 1fr;
                gap: 20px;
                padding: 0 10px;
            }
            .header {
                padding-top: 80px; 
            }
            .header h1 {
                font-size: 1.8rem;
            }
            .news-title {
                font-size: 1.25rem;
            }
            .controls {
                flex-direction: column;
                gap: 10px;
                padding: 10px;
                align-items: flex-start;
            }
            .controls label, .controls select, .controls .search-wrapper, .controls .reset-button {
                width: 100%;
                margin-right: 0;
                box-sizing: border-box;
            }
            /* RWD: å°‡è³‡è¨Šå°å·¥å…·ç½®æ–¼é ‚éƒ¨ä¸­å¤® */
            .info-widget {
                top: 15px;
                left: 50%;
                transform: translateX(-50%);
                text-align: center;
                width: 90%;
            }
            .controls .reset-button {
                margin-left: 0; 
            }
        }
        /* --------------------------------- */
    </style>
</head>
<body>

    <div class="alert-bar">
        âš ï¸ çæƒœç”Ÿå‘½ï¼Œè«‹å°‹æ±‚å”åŠ©ï¼š2389 2222 (é¦™æ¸¯æ’’ç‘ªåˆ©äºé˜²æ­¢è‡ªæ®ºæœƒ) | 2382 0000 (ç”Ÿå‘½ç†±ç·š)
    </div>

    <div class="header">
        
        <div class="info-widget">
            <div id="current-date-time" class="date-time">è¼‰å…¥æ™‚é–“ä¸­...</div>
            <div id="current-weather" class="weather">è¼‰å…¥å¤©æ°£ä¸­...</div>
        </div>
        
        <h1>é¦™æ¸¯æœ¬åœ°è‡ªæ®ºæ–°èç›£æ¸¬ç«™</h1>
        
        <div class="controls">
            <label for="status-filter">ç‹€æ…‹ç¯©é¸ï¼š</label>
            <select id="status-filter" aria-label="ç¯©é¸æ–°èç‹€æ…‹">
                <option value="all">æ‰€æœ‰ç‹€æ…‹</option>
                <option value="death">ğŸ”´ è‡ªæ®ºèº«äº¡</option>
                <option value="attempt">ğŸŸ¢ ä¼åœ–è‡ªæ®º</option>
                <option value="ambiguous">ğŸŸ  å¾…å®š/æ¨¡ç³Š</option>
            </select>

            <label for="sort-order">æ’åºæ–¹å¼ï¼š</label>
            <select id="sort-order" aria-label="æ–°èæ’åºæ–¹å¼">
                <option value="newest">ç”±æœ€æ–°æ’åº</option>
                <option value="oldest">ç”±æœ€èˆŠæ’åº</option>
            </select>
            
            <div class="search-wrapper">
                <input type="text" id="keyword-search" placeholder="ğŸ” æœç´¢æ¨™é¡Œé—œéµå­—..." title="è¼¸å…¥ä»»ä½•é—œéµå­—æœç´¢" aria-label="é—œéµå­—æœç´¢æ¬„">
                <button type="button" id="clear-search-btn" class="clear-button" aria-label="æ¸…ç©ºæœç´¢å…§å®¹">Ã—</button>
            </div>
            <button type="button" id="reset-filters-btn" class="reset-button" aria-label="é‡ç½®æ‰€æœ‰ç¯©é¸æ¢ä»¶">
                ğŸ§¹ é‡ç½®
            </button>
        </div>

        <div class="meta">
            å°ˆæ³¨æ–¼ HK01ã€æ±ç¶²ã€æ˜Ÿå³¶çªç™¼æ–°è Â· é¡¯ç¤ºæœ€è¿‘ 7 æ—¥æ•¸æ“š
            <p style="color: #c0392b; font-weight: bold; margin-top: 10px;">
                * è¨»ï¼š**å·²å¼·åŒ–é—œéµè©åŠåœ°å€éæ¿¾**ï¼Œç‹€æ…‹åŠåœ°å€æ¨™è¨˜åŸºæ–¼æ¨™é¡Œ/æ‘˜è¦æ¨æ¸¬ã€‚
            </p>
        </div>
        <div class="meta" id="last-update">æ­£åœ¨æº–å‚™...</div>
    </div>

    <div class="container">
        <div class="source-column">
            <div class="column-header header-singtao">ğŸ“° æ˜Ÿå³¶æ—¥å ± (çªç™¼å°ˆæ³¨)</div>
            <div id="list-singtao" class="news-list"></div>
        </div>

        <div class="source-column">
            <div class="column-header header-oncc">ğŸŒ æ±ç¶² (On.cc)</div>
            <div id="list-oncc" class="news-list"></div>
        </div>

        <div class="source-column">
            <div class="column-header header-hk01">ğŸ“± HK01</div>
            <div id="list-hk01" class="news-list"></div>
        </div>
    </div>

    <button id="back-to-top-btn" class="back-to-top" aria-label="è¿”å›é é¢é ‚éƒ¨">â¬†ï¸</button>

    <script>
        // å…¨å±€è®Šé‡
        let ALL_NEWS_DATA = {}; 
        
        // 1. æ ¸å¿ƒæŸ¥è©¢è© (Google Search - 7æ—¥)
        const BASE_KEYWORDS = '(è‡ªæ®º OR è¼•ç”Ÿ OR å°‹æ­» OR å°‹çŸ­ OR å¢®æ¨“ OR è·³æ¨“ OR ç‡’ç‚­ OR å€’è‡¥ OR å±é«”ç™¼ç¾ OR æµ®å± OR é£Ÿè€é¼ è—¥ OR å‰²è„ˆ OR æœè—¥ OR åŠé ¸ OR æŠ•æ²³ OR æŠ•æµ· OR æœæ¯’ OR ä¼è·³ OR å¤©å°) (é¦™æ¸¯ OR æœ¬åœ° OR æ¸¯å³¶ OR ä¹é¾ OR æ–°ç•Œ OR é›¢å³¶) when:7d';
        
        // 2. å…§éƒ¨ç²¾æº–éæ¿¾é—œéµè© (å¼·åˆ¶æª¢æŸ¥)
        const SUICIDE_KEYWORDS = ['è‡ªæ®º', 'è¼•ç”Ÿ', 'å°‹æ­»', 'å°‹çŸ­', 'å¢®æ¨“', 'è·³æ¨“', 'ç‡’ç‚­', 'å€’è‡¥', 'å±é«”ç™¼ç¾', 'æµ®å±', 'é£Ÿè€é¼ è—¥', 'æœé£Ÿ', 'å‰²è„ˆ', 'å‰²è…•', 'åŠé ¸', 'æŠ•æ²³', 'æŠ•æµ·', 'æœæ¯’', 'ä¼è·³', 'å¤©å°', 'å°‹çŸ­è¦‹', 'å‰²å‚·'];

        // 3. æ’é™¤è©
        const EXCLUDE_WORDS = ['æ¨“å¸‚', 'è‚¡å¸‚', 'å¤§è·Œ', 'åŠ‡é€', 'æ‹æˆ²', 'æ”¶è¦–', 'è‚¡åƒ¹', 'æˆäº¤', 'æ¥­ä¸»', 'åäºº', 'ç¶“æ¿Ÿ', 'é‡‘è', 'æŠ•è³‡', 'ç§‘ä¼', 'å•†æ¥­åŒ–', 'ç§‘æŠ€åœ’', 'å¯Œå£«åº·', 'åŸºé‡‘', 'IPO', 'ä¸Šå¸‚', 'å‚µåˆ¸', 'æŒ‡æ•¸', 'åŒ¯ç‡', 'æ¨“åƒ¹', 'ç§Ÿé‡‘', 'è²·è³£', 'å‰µæ¥­', 'å‰µç§‘', 'ç§‘æŠ€', 'å¨›æ¨‚', 'æ˜æ˜Ÿ', 'è—äºº', 'æ¼”å”±æœƒ', 'ç´…æ¯¯', 'æ™‚è£', 'é›»å½±', 'åŠ‡é›†', 'ç·‹è', 'æ™‚å°š', 'é¤é£²', 'æ—…éŠ', 'ç¾é£Ÿ', 'æ¼”å”±æœƒ', 'çƒéšŠ', 'æ³¢', 'æ¶ˆé˜²æ¼”ç¿’', 'ç«è­¦æ¼”ç¿’', 'æ•‘æ´æ¼”ç¿’', 'è­¦éšŠæ¼”ç¿’', 'é«”è‚²', 'æ•™è‚²', 'å¤§å­¸'];

        // 4. ç‹€æ…‹åˆ¤æ–·é—œéµè© (å·²å¼·åŒ–)
        const DEATH_KEYWORDS = ['èº«äº¡', 'æ–ƒå‘½', 'å±é«”', 'ä¸æ²»', 'ç•¶å ´æ­»äº¡', 'è­‰å¯¦æ­»äº¡', 'æ­»äº¡', 'äº¡', 'è¿”é­‚ä¹è¡“', 'ä¼å±', 'æ®å‘½', 'å€’æ–ƒ', 'é­‚æ–·', 'æµ®å±', 'æººæ–ƒ', 'è­‰å¯¦ä¸æ²»', 'èº«æ•…', 'çµ•å‘½']; 
        const ATTEMPT_KEYWORDS = ['ä¼åœ–', 'ç²æ•‘', 'æ•‘å›', 'åˆ¶æ­¢', 'é€é™¢', 'å±å', 'å±ç«™', 'è‡ªæ®˜', 'å‰²è„ˆ', 'æœè—¥', 'æœæ¯’', 'å°‹çŸ­', 'æ¸…é†’', 'é€é™¢æ¶æ•‘', 'æ˜è¿·', 'ç‡’å‚·', 'å‹¸æœ', 'é€é™¢æ²»ç†', 'æ±‚é†«'];
        
        // 5. åœ°å€åˆ¤æ–·é—œéµå­—åˆ—è¡¨ (å·²å¼·åŒ–å’Œæ“´å……)
        const DISTRICT_MAP = {
            /* æ¸¯å³¶ (Hong Kong Island) */
            // ä¸­è¥¿å€
            'ä¸­è¥¿': 'ä¸­è¥¿å€', 'ä¸­ç’°': 'ä¸­è¥¿å€', 'åŠå±±': 'ä¸­è¥¿å€', 'è¥¿ç‡Ÿç›¤': 'ä¸­è¥¿å€', 'ä¸Šç’°': 'ä¸­è¥¿å€', 'å …å°¼åœ°åŸ': 'ä¸­è¥¿å€', 'è¥¿ç’°': 'ä¸­è¥¿å€', 'é‡‘é˜': 'ä¸­è¥¿å€', 'èˆ¬å’¸é“': 'ä¸­è¥¿å€', 'å±±é ‚': 'ä¸­è¥¿å€', 'å¤ªå¹³å±±': 'ä¸­è¥¿å€', 'çŸ³å¡˜å’€': 'ä¸­è¥¿å€', 'è–„æ‰¶æ—é“': 'ä¸­è¥¿å€', 'å …å°¼': 'ä¸­è¥¿å€', 'åœ‹éš›é‡‘èä¸­å¿ƒ': 'ä¸­è¥¿å€', 'çš‡åå¤§é“': 'ä¸­è¥¿å€', 'å¾·è¼”é“': 'ä¸­è¥¿å€', 'è·ææ´»é“': 'ä¸­è¥¿å€', 'æ‘©æ˜Ÿå¶º': 'ä¸­è¥¿å€', 'ç¶­å¤šåˆ©äºåŸ': 'ä¸­è¥¿å€', 
            // ç£ä»”å€
            'ç£ä»”': 'ç£ä»”å€', 'éŠ…é‘¼ç£': 'ç£ä»”å€', 'è·‘é¦¬åœ°': 'ç£ä»”å€', 'å¤§å‘': 'ç£ä»”å€', 'æƒæ¡¿åŸ”': 'ç£ä»”å€', 'ç¦®é “å±±': 'ç£ä»”å€', 'å¤©å': 'ç£ä»”å€', 'å‹µå¾·é‚¨': 'ç£ä»”å€', 'å´‡å…‰': 'ç£ä»”å€', 'æœƒå±•': 'ç£ä»”å€', 'éµé ¸': 'ç£ä»”å€', 'åˆ©åœ’': 'ç£ä»”å€', 'ç¶­å¤šåˆ©äºå…¬åœ’': 'ç£ä»”å€', 'éŠ…é‘¼ç£é“': 'ç£ä»”å€', 'çŸ³æ°´æ¸ è¡—': 'ç£ä»”å€', // NEW Street
            // æ±å€
            'æ±å€': 'æ±å€', 'åŒ—è§’': 'æ±å€', 'é°‚é­šæ¶Œ': 'æ±å€', 'ç­²ç®•ç£': 'æ±å€', 'æŸ´ç£': 'æ±å€', 'è¥¿ç£æ²³': 'æ±å€', 'æèŠ±é‚¨': 'æ±å€', 'å°è¥¿ç£': 'æ±å€', 'åº·æ€¡èŠ±åœ’': 'æ±å€', 'åº·å±±èŠ±åœ’': 'æ±å€', 'å¤ªå¤åŸ': 'æ±å€', 'ç‚®å°å±±': 'æ±å€', 'è—ç£åŠå³¶': 'æ±å€', 'èˆˆè¯é‚¨': 'æ±å€', 'æ¼ç£é‚¨': 'æ±å€', 'ç’°ç¿ é‚¨': 'æ±å€', 'åŸå¸‚èŠ±åœ’': 'æ±å€', 'å’Œå¯Œä¸­å¿ƒ': 'æ±å€', 'å¤ªå¤åŠ': 'æ±å€',
            // å—å€
            'å—å€': 'å—å€', 'é»ƒç«¹å‘': 'å—å€', 'å¤§å£ç’°': 'å—å€', 'è–„æ‰¶æ—': 'å—å€', 'ç½®å¯Œ': 'å—å€', 'è¯å¯Œ': 'å—å€', 'è¯è²´': 'å—å€', 'é¦™æ¸¯ä»”': 'å—å€', 'ç”°ç£': 'å—å€', 'è²æ²™ç£': 'å—å€', 'æ•¸ç¢¼æ¸¯': 'å—å€', 'æ·ºæ°´ç£': 'å—å€', 'èµ¤æŸ±': 'å—å€', 'å¤§æ½­': 'å—å€', 'åˆ©æ±é‚¨': 'å—å€', 'æµ·æ€¡åŠå³¶': 'å—å€', 'é´¨è„·æ´²': 'å—å€', 'æ·±æ°´ç£': 'å—å€', 'çŸ³æ¾³': 'å—å€', 'å£½è‡£å±±': 'å—å€', 'æµ·æ´‹å…¬åœ’': 'å—å€', 'é´¨è„·': 'å—å€', 'ç¾åˆ©æ¨“': 'å—å€', // NEW Landmark

            /* ä¹é¾ (Kowloon) */
            // æ²¹å°–æ—ºå€
            'æ²¹å°–æ—º': 'æ²¹å°–æ—ºå€', 'æ—ºè§’': 'æ²¹å°–æ—ºå€', 'æ²¹éº»åœ°': 'æ²¹å°–æ—ºå€', 'å°–æ²™å’€': 'æ²¹å°–æ—ºå€', 'å¤§è§’å’€': 'æ²¹å°–æ—ºå€', 'ä½æ•¦': 'æ²¹å°–æ—ºå€', 'å¥§é‹': 'æ²¹å°–æ—ºå€', 'å¯Œæ¦®èŠ±åœ’': 'æ²¹å°–æ—ºå€', 'æµ·å¯Œè‹‘': 'æ²¹å°–æ—ºå€', 'å»£æ±é“': 'æ²¹å°–æ—ºå€', 'åœ“æ–¹': 'æ²¹å°–æ—ºå€', 'è¥¿ä¹é¾ç«™': 'æ²¹å°–æ—ºå€', 'å½Œæ•¦é“': 'æ²¹å°–æ—ºå€', 'å¤ªå­': 'æ²¹å°–æ—ºå€', 'çª©æ‰“è€é“': 'æ²¹å°–æ—ºå€', 'ä¸­æ¸¯åŸ': 'æ²¹å°–æ—ºå€', 'æœ—è±ªåŠ': 'æ²¹å°–æ—ºå€', 'é›…è˜­': 'æ²¹å°–æ—ºå€', 'æ­·å²åšç‰©é¤¨': 'æ²¹å°–æ—ºå€', // NEW Landmark
            // æ·±æ°´åŸ—å€
            'æ·±æ°´': 'æ·±æ°´åŸ—å€', 'é•·æ²™ç£': 'æ·±æ°´åŸ—å€', 'çŸ³ç¡¤å°¾': 'æ·±æ°´åŸ—å€', 'è”æè§’': 'æ·±æ°´åŸ—å€', 'ç¾å­š': 'æ·±æ°´åŸ—å€', 'å—å±±é‚¨': 'æ·±æ°´åŸ—å€', 'è˜‡å±‹é‚¨': 'æ·±æ°´åŸ—å€', 'ç™½ç”°é‚¨': 'æ·±æ°´åŸ—å€', 'éº—é–£é‚¨': 'æ·±æ°´åŸ—å€', 'æ¬½å·è¡—': 'æ·±æ°´åŸ—å€', 'åˆä¸€æ‘': 'æ·±æ°´åŸ—å€', 'æé„­å±‹': 'æ·±æ°´åŸ—å€', 'å…ƒå·é‚¨': 'æ·±æ°´åŸ—å€', 'å¯Œæ˜Œé‚¨': 'æ·±æ°´åŸ—å€', 'è¥¿ä¹é¾ä¸­å¿ƒ': 'æ·±æ°´åŸ—å€', 'é»ƒé‡‘é›»è…¦': 'æ·±æ°´åŸ—å€', 'å¸ƒè—å¸‚å ´': 'æ·±æ°´åŸ—å€', // NEW Landmark
            // ä¹é¾åŸå€
            'ä¹é¾åŸ': 'ä¹é¾åŸå€', 'ç´…ç£¡': 'ä¹é¾åŸå€', 'ä¹é¾å¡˜': 'ä¹é¾åŸå€', 'åœŸç“œç£': 'ä¹é¾åŸå€', 'ä½•æ–‡ç”°': 'ä¹é¾åŸå€', 'å•Ÿå¾·': 'ä¹é¾åŸå€', 'å•Ÿæ™´é‚¨': 'ä¹é¾åŸå€', 'å¾·æœ—é‚¨': 'ä¹é¾åŸå€', 'ç¿”é¾ç£': 'ä¹é¾åŸå€', 'æ„›æ°‘é‚¨': 'ä¹é¾åŸå€', 'é»ƒåŸ”': 'ä¹é¾åŸå€', 'æµ·é€¸è±ªåœ’': 'ä¹é¾åŸå€', 'åˆä¸€åŸ': 'ä¹é¾åŸå€', 'æµ¸å¤§': 'ä¹é¾åŸå€', 'ç†å¤§': 'ä¹é¾åŸå€', 'é¦¬é ­åœ': 'ä¹é¾åŸå€', 'é¦¬é ­è§’': 'ä¹é¾åŸå€', 'ä¹é¾ç£å…¬åœ’': 'ä¹é¾åŸå€', 'è’²å´—': 'ä¹é¾åŸå€', // NEW Road/Estate
            // é»ƒå¤§ä»™å€
            'é»ƒå¤§ä»™': 'é»ƒå¤§ä»™å€', 'æ…ˆé›²å±±': 'é»ƒå¤§ä»™å€', 'æ¨‚å¯Œ': 'é»ƒå¤§ä»™å€', 'å½©è™¹': 'é»ƒå¤§ä»™å€', 'é‘½çŸ³å±±': 'é»ƒå¤§ä»™å€', 'æ–°è’²å´—': 'é»ƒå¤§ä»™å€', 'ç«¹åœ’é‚¨': 'é»ƒå¤§ä»™å€', 'é³³å‡°æ–°é‚¨': 'é»ƒå¤§ä»™å€', 'æ–§å±±': 'é»ƒå¤§ä»™å€', 'é¾ç¿”é“': 'é»ƒå¤§ä»™å€', 'ç‰›æ± ç£': 'é»ƒå¤§ä»™å€', 'æ±é ­é‚¨': 'é»ƒå¤§ä»™å€', 'æ©«é ­ç£¡': 'é»ƒå¤§ä»™å€', 'å¤©é¦¬è‹‘': 'é»ƒå¤§ä»™å€', 'å½©é›²é‚¨': 'é»ƒå¤§ä»™å€', 'åªçŸ³é‚¨': 'é»ƒå¤§ä»™å€', 'å¿—è“®æ·¨è‹‘': 'é»ƒå¤§ä»™å€', 'å—è“®åœ’æ± ': 'é»ƒå¤§ä»™å€', 'ç…å­å±±å…¬åœ’': 'é»ƒå¤§ä»™å€', // NEW Landmark
            // è§€å¡˜å€
            'è§€å¡˜': 'è§€å¡˜å€', 'è—ç”°': 'è§€å¡˜å€', 'æ²¹å¡˜': 'è§€å¡˜å€', 'ç§€èŒ‚åª': 'è§€å¡˜å€', 'é †åˆ©': 'è§€å¡˜å€', 'æ¨‚è¯': 'è§€å¡˜å€', 'éº—æ™¶èŠ±åœ’': 'è§€å¡˜å€', 'å•Ÿæ¥­é‚¨': 'è§€å¡˜å€', 'é †å¤©é‚¨': 'è§€å¡˜å€', 'ç¿ å±é‚¨': 'è§€å¡˜å€', 'é¯‰é­šé–€': 'è§€å¡˜å€', 'å‰µç´€ä¹‹åŸ': 'è§€å¡˜å€', 'ç‰›é ­è§’': 'è§€å¡˜å€', 'ä¹é¾ç£': 'è§€å¡˜å€', 'å¾·ç¦èŠ±åœ’': 'è§€å¡˜å€', 'æ·˜å¤§èŠ±åœ’': 'è§€å¡˜å€', 'æ›‰éº—è‹‘': 'è§€å¡˜å€', 'é«˜ä¿Šè‹‘': 'è§€å¡˜å€', 'å®‰é”é‚¨': 'è§€å¡˜å€', 'å®‰æ³°é‚¨': 'è§€å¡˜å€', 'æ±ä¹æ–‡åŒ–ä¸­å¿ƒ': 'è§€å¡˜å€', 'ä½æ•¦è°·å…¬åœ’': 'è§€å¡˜å€', // NEW Landmark

            /* æ–°ç•Œ (New Territories) */
            // è‘µé’å€
            'è‘µé’': 'è‘µé’å€', 'è‘µæ¶Œ': 'è‘µé’å€', 'é’è¡£': 'è‘µé’å€', 'è”æ™¯': 'è‘µé’å€', 'è‘µç››': 'è‘µé’å€', 'è‘µèŠ³': 'è‘µé’å€', 'é•·å®‰é‚¨': 'è‘µé’å€', 'é•·åº·é‚¨': 'è‘µé’å€', 'é’è¡£é‚¨': 'è‘µé’å€', 'é•·å®é‚¨': 'è‘µé’å€', 'é•·ç™¼é‚¨': 'è‘µé’å€', 'çŸ³ç±¬': 'è‘µé’å€', 'å¤§çª©å£': 'è‘µé’å€', 'è²¨æ«ƒç¢¼é ­': 'è‘µé’å€', 'é’è¡£æ©‹': 'è‘µé’å€', 'é’é¦¬å¤§æ©‹': 'è‘µé’å€', 'ç¾æ™¯èŠ±åœ’': 'è‘µé’å€', 'é’è¡£è‡ªç„¶å¾‘': 'è‘µé’å€', // NEW Landmark
            // èƒç£å€
            'èƒç£': 'èƒç£å€', 'æ±€ä¹': 'èƒç£å€', 'æ·±äº•': 'èƒç£å€', 'é¦¬ç£': 'èƒç£å€', 'éº—åŸèŠ±åœ’': 'èƒç£å€', 'æ„‰æ™¯æ–°åŸ': 'èƒç£å€', 'ç¶ æ¥Šæ–°é‚¨': 'èƒç£å€', 'è±¡å±±é‚¨': 'èƒç£å€', 'ç¦ä¾†é‚¨': 'èƒç£å€', 'çŸ³åœè§’': 'èƒç£å€', 'æµ·ä¹‹æˆ€': 'èƒç£å€', 'èƒå¨': 'èƒç£å€', 'èƒæ™¯åœ': 'èƒç£å€', 'æ²¹æŸ‘é ­': 'èƒç£å€', 'æ±€ä¹æ©‹': 'èƒç£å€', 'å¤§å¸½å±±': 'èƒç£å€', // NEW Landmark
            // å±¯é–€å€
            'å±¯é–€': 'å±¯é–€å€', 'å…†åº·': 'å±¯é–€å€', 'è´è¶ç£': 'å±¯é–€å€', 'å¤§èˆˆ': 'å±¯é–€å€', 'å‹æ„›é‚¨': 'å±¯é–€å€', 'å®‰å®šé‚¨': 'å±¯é–€å€', 'æ¹–æ™¯é‚¨': 'å±¯é–€å€', 'å±¯é–€ç¢¼é ­': 'å±¯é–€å€', 'è‰¯æ™¯é‚¨': 'å±¯é–€å€', 'ç”°æ™¯é‚¨': 'å±¯é–€å€', 'å¯¶ç”°': 'å±¯é–€å€', 'å±±æ™¯é‚¨': 'å±¯é–€å€', 'ä¸‰è–': 'å±¯é–€å€', 'ç½®æ¨‚': 'å±¯é–€å€', 'é»ƒé‡‘æµ·å²¸': 'å±¯é–€å€', 'å°æ¬–': 'å±¯é–€å€', 'è—åœ°': 'å±¯é–€å€', 'å¤§æ¬–': 'å±¯é–€å€', 'åƒå³¶æ¹–': 'å±¯é–€å€', // NEW Landmark
            // å…ƒæœ—å€
            'å…ƒæœ—': 'å…ƒæœ—å€', 'å¤©æ°´åœ': 'å…ƒæœ—å€', 'éŒ¦ç”°': 'å…ƒæœ—å€', 'å…«é„‰': 'å…ƒæœ—å€', 'æ–°ç”°': 'å…ƒæœ—å€', 'å±å±±': 'å…ƒæœ—å€', 'æ©«æ´²': 'å…ƒæœ—å€', 'æœ—å±é‚¨': 'å…ƒæœ—å€', 'å¤©æ‚…é‚¨': 'å…ƒæœ—å€', 'é‡‡è‘‰åº­': 'å…ƒæœ—å€', 'æ´ªæ°´æ©‹': 'å…ƒæœ—å€', 'å»ˆæ‘': 'å…ƒæœ—å€', 'æµæµ®å±±': 'å…ƒæœ—å€', 'åŠ å·': 'å…ƒæœ—å€', 'éŒ¦ç¶‰': 'å…ƒæœ—å€', 'å¤§æ£ ': 'å…ƒæœ—å€', 'å¤©è€€é‚¨': 'å…ƒæœ—å€', 'å¤©ç‘é‚¨': 'å…ƒæœ—å€',
            // åŒ—å€
            'åŒ—å€': 'åŒ—å€', 'ä¸Šæ°´': 'åŒ—å€', 'ç²‰å¶º': 'åŒ—å€', 'æ²™é ­è§’': 'åŒ—å€', 'æ‰“é¼“å¶º': 'åŒ—å€', 'å¤æ´': 'åŒ—å€', 'è¯æ˜é‚¨': 'åŒ—å€', 'å˜‰ç¦é‚¨': 'åŒ—å€', 'æ¸…æ²³é‚¨': 'åŒ—å€', 'ç¥¥è¯é‚¨': 'åŒ—å€', 'è¯å’Œå¢Ÿ': 'åŒ—å€', 'è´è¶å±±': 'åŒ—å€', 'çŸ³æ¹–å¢Ÿ': 'åŒ—å€', 'è»åœ°': 'åŒ—å€', 'åªè¼‹': 'åŒ—å€', 'æµæ°´éŸ¿': 'åŒ—å€', 'é¶´è—ª': 'åŒ—å€', // NEW Landmark
            // å¤§åŸ”å€
            'å¤§åŸ”': 'å¤§åŸ”å€', 'å¤§åŸ”å¢Ÿ': 'å¤§åŸ”å€', 'å»£ç¦': 'å¤§åŸ”å€', 'ç™½çŸ³è§’': 'å¤§åŸ”å€', 'å¤§ç¾ç£': 'å¤§åŸ”å€', 'ç§‘å­¸åœ’': 'å¤§åŸ”å€', 'å¯Œå–„é‚¨': 'å¤§åŸ”å€', 'æ˜Œé‹ä¸­å¿ƒ': 'å¤§åŸ”å€', 'å¤§åŸ”ä¸­å¿ƒ': 'å¤§åŸ”å€', 'å¤ªå’Œ': 'å¤§åŸ”å€', 'å¯Œäº¨é‚¨': 'å¤§åŸ”å€', 'é‹é ­å¡˜': 'å¤§åŸ”å€', 'æ–°å³°èŠ±åœ’': 'å¤§åŸ”å€', 'åéœ²æ¸¯': 'å¤§åŸ”å€',
            // æ²™ç”°å€
            'æ²™ç”°': 'æ²™ç”°å€', 'é¦¬éå±±': 'æ²™ç”°å€', 'å¤§åœ': 'æ²™ç”°å€', 'ç«ç‚­': 'æ²™ç”°å€', 'å°ç€æº': 'æ²™ç”°å€', 'åŸé–€æ²³': 'æ²™ç”°å€', 'ç€æºé‚¨': 'æ²™ç”°å€', 'ç¦¾è¼‹é‚¨': 'æ²™ç”°å€', 'å»£æºé‚¨': 'æ²™ç”°å€', 'åšåº·é‚¨': 'æ²™ç”°å€', 'æ–°åŸå¸‚å»£å ´': 'æ²™ç”°å€', 'æ²™ç”°é¦¬å ´': 'æ²™ç”°å€', 'å¨çˆ¾æ–¯é†«é™¢': 'æ²™ç”°å€', 'æ„‰ç¿ è‹‘': 'æ²™ç”°å€', 'ç§¦çŸ³é‚¨': 'æ²™ç”°å€', 'ç©—ç¦¾è‹‘': 'æ²™ç”°å€', 'ç¢©é–€é‚¨': 'æ²™ç”°å€', 'çƒæºªæ²™': 'æ²™ç”°å€', 'æ†å®‰': 'æ²™ç”°å€', 'é¡¯å¾‘': 'æ²™ç”°å€',
            // è¥¿è²¢å€
            'è¥¿è²¢': 'è¥¿è²¢å€', 'å°‡è»æ¾³': 'è¥¿è²¢å€', 'å‘å£': 'è¥¿è²¢å€', 'èª¿æ™¯å¶º': 'è¥¿è²¢å€', 'å¯¶ç³': 'è¥¿è²¢å€', 'å°šå¾·': 'è¥¿è²¢å€', 'æ—¥å‡ºåº·åŸ': 'è¥¿è²¢å€', 'ç¿ æ—é‚¨': 'è¥¿è²¢å€', 'æ™¯æ—é‚¨': 'è¥¿è²¢å€', 'å¥æ˜é‚¨': 'è¥¿è²¢å€', 'è¥¿è²¢ç¢¼é ­': 'è¥¿è²¢å€', 'è ”æ¶Œ': 'è¥¿è²¢å€', 'æ¸…æ°´ç£': 'è¥¿è²¢å€', 'ç§‘å¤§': 'è¥¿è²¢å€', 'å¯¶æ—é‚¨': 'è¥¿è²¢å€', 'åšå¾·é‚¨': 'è¥¿è²¢å€', 'èŒµæ€¡': 'è¥¿è²¢å€', 'ä½›å ‚é–€': 'è¥¿è²¢å€', 'å¤§å»Ÿç£': 'è¥¿è²¢å€', // NEW Landmark

            /* é›¢å³¶ (Islands) */
            // é›¢å³¶å€
            'é›¢å³¶': 'é›¢å³¶å€', 'æ±æ¶Œ': 'é›¢å³¶å€', 'å¤§å¶¼å±±': 'é›¢å³¶å€', 'é•·æ´²': 'é›¢å³¶å€', 'å—ä¸«å³¶': 'é›¢å³¶å€', 'æ„‰æ™¯ç£': 'é›¢å³¶å€', 'åªæ´²': 'é›¢å³¶å€', 'æ¢…çª©': 'é›¢å³¶å€', 'å¤§æ¾³': 'é›¢å³¶å€', 'èµ¤é±²è§’': 'é›¢å³¶å€', 'æ©Ÿå ´': 'é›¢å³¶å€', 'é€¸æ±é‚¨': 'é›¢å³¶å€', 'æ˜‚åª': 'é›¢å³¶å€', 'æ¬£æ¾³': 'é›¢å³¶å€', 'æ¦•æ¨¹ç£': 'é›¢å³¶å€', 'ç´¢ç½Ÿç£': 'é›¢å³¶å€', 'è²æ¾³': 'é›¢å³¶å€', 'å¡˜ç¦': 'é›¢å³¶å€', 'è¿ªå£«å°¼': 'é›¢å³¶å€',
        };
        const SOURCES = [
            { id: 'list-hk01', site: 'hk01.com', querySuffix: '' },
            { id: 'list-oncc', site: 'on.cc', querySuffix: '' },
            { id: 'list-singtao', site: 'stheadline.com', querySuffix: 'çªç™¼' } 
        ];


        // -----------------------------------------------------
        // æ ¸å¿ƒ UX å‡½æ•¸
        // -----------------------------------------------------

        function updateDateTime() {
            const now = new Date();
            const dateOptions = { year: 'numeric', month: 'numeric', day: 'numeric', weekday: 'short' };
            const timeOptions = { hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: false };
            
            const dateStr = now.toLocaleDateString('zh-HK', dateOptions);
            const timeStr = now.toLocaleTimeString('zh-HK', timeOptions);

            const dateTimeElement = document.getElementById('current-date-time');
            if (dateTimeElement) {
                dateTimeElement.textContent = `${dateStr} ${timeStr}`;
            }
        }
        
        function updateControlIndicators() {
            const statusFilter = document.getElementById('status-filter');
            const sortOrder = document.getElementById('sort-order');
            const keywordSearch = document.getElementById('keyword-search');

            statusFilter.classList.toggle('active-control', statusFilter.value !== 'all');
            sortOrder.classList.toggle('active-control', sortOrder.value !== 'newest');
            keywordSearch.classList.toggle('active-control', keywordSearch.value.trim() !== '');
        }

        function resetFilters() {
            document.getElementById('status-filter').value = 'all';
            document.getElementById('sort-order').value = 'newest';
            document.getElementById('keyword-search').value = '';
            
            setupSearchClear(); 
            renderAllColumns();
        }

        function setupSearchClear() {
            const searchInput = document.getElementById('keyword-search');
            const clearButton = document.getElementById('clear-search-btn');

            function toggleClearButton() {
                clearButton.classList.toggle('visible', searchInput.value.length > 0);
            }

            clearButton.onclick = () => {
                searchInput.value = '';
                toggleClearButton();
                renderAllColumns(); 
            };

            searchInput.oninput = () => {
                toggleClearButton();
            };

            toggleClearButton();
        }
        
        function setupBackToTop() {
            const backToTopBtn = document.getElementById('back-to-top-btn');
            const scrollThreshold = 300; 

            window.onscroll = () => {
                const isVisible = document.body.scrollTop > scrollThreshold || document.documentElement.scrollTop > scrollThreshold;
                backToTopBtn.classList.toggle('visible', isVisible);
            };

            backToTopBtn.onclick = () => {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            };
        }

        function setupLinkPreload() {
            document.querySelectorAll('.news-item').forEach(item => {
                const linkUrl = item.href;
                if (!linkUrl) return;

                item.addEventListener('mouseover', () => {
                    const link = document.createElement('link');
                    link.rel = 'prefetch';
                    link.href = linkUrl;
                    document.head.appendChild(link);
                    
                    setTimeout(() => link.remove(), 60000); 
                }, { once: true }); 
            });
        }


        // -----------------------------------------------------
        // è¼”åŠ©å‡½æ•¸
        // -----------------------------------------------------
        function formatRelativeTime(dateString) {
            const date = new Date(dateString);
            const now = new Date();
            const diffInSeconds = Math.floor((now - date) / 1000);

            const intervals = [
                { limit: 31536000, label: 'å¹´å‰' }, { limit: 2592000, label: 'å€‹æœˆå‰' },
                { limit: 86400, label: 'æ—¥å‰' }, { limit: 3600, label: 'å°æ™‚å‰' },
                { limit: 60, label: 'åˆ†é˜å‰' }, { limit: 1, label: 'ç§’å‰' }
            ];

            for (let i = 0; i < intervals.length; i++) {
                const interval = intervals[i];
                if (diffInSeconds >= interval.limit) {
                    const count = Math.floor(diffInSeconds / interval.limit);
                    return count + interval.label;
                }
            }
            return "å¹¾ç§’å‰";
        }

        function getSuicideStatusString(title) {
            const text = title;
            if (DEATH_KEYWORDS.some(k => text.includes(k))) return 'death';
            if (ATTEMPT_KEYWORDS.some(k => text.includes(k))) return 'attempt';
            return 'ambiguous';
        }

        function getSuicideStatusHtml(status) {
            if (status === 'death') return '<span class="status-tag tag-death">ğŸ”´ è‡ªæ®ºèº«äº¡</span>';
            if (status === 'attempt') return '<span class="status-tag tag-attempt">ğŸŸ¢ ä¼åœ–è‡ªæ®º</span>';
            return '<span class="status-tag tag-ambiguous">ğŸŸ  å¾…å®š/æ¨¡ç³Š</span>';
        }
        
        // âš ï¸ åœ°å€åˆ¤æ–·å‡½æ•¸
        function getDistrictTag(title) { 
            const text = title;
            // æŒ‰é•·åº¦æ’åºï¼Œç¢ºä¿æº–ç¢ºçš„åç¨±å„ªå…ˆè¢«åŒ¹é… (ä¾‹å¦‚ã€ŒçŸ³ç¡¤å°¾ã€å„ªå…ˆæ–¼ã€ŒçŸ³ç¡¤ã€)
            const sortedKeys = Object.keys(DISTRICT_MAP).sort((a, b) => b.length - a.length);

            for (const shortName of sortedKeys) {
                if (text.includes(shortName)) {
                    const districtName = DISTRICT_MAP[shortName];
                    return `<span class="status-tag tag-district">${districtName}</span>`;
                }
            }
            return '<span class="status-tag tag-district tag-unknown">åœ°å€ä¸æ˜</span>';
        }

        function renderSkeletonScreen(containerId, count = 5) {
            const container = document.getElementById(containerId);
            let html = '';
            for (let i = 0; i < count; i++) {
                html += `
                    <div class="skeleton-item">
                        <div class="skeleton-line short"></div>
                        <div class="skeleton-line long"></div>
                        <div class="skeleton-line medium"></div>
                    </div>
                `;
            }
            container.innerHTML = html;
        }

        function renderNewsList(containerId, items) {
            const container = document.getElementById(containerId);
            
            if (!items || items.length === 0) {
                container.innerHTML = `<div class="empty">éå» 7 æ—¥ç„¡ç›¸é—œå ±å°</div>`;
                return;
            }

            let html = '<div class="news-list-content">'; // ä½¿ç”¨ä¸€å€‹æ–°çš„ div åŒ…è£¹
            items.forEach(item => {
                const dateObj = new Date(item.pubDate);
                const dateStr = `${dateObj.getFullYear()}/${(dateObj.getMonth()+1).toString().padStart(2, '0')}/${dateObj.getDate().toString().padStart(2, '0')} ${dateObj.getHours().toString().padStart(2, '0')}:${dateObj.getMinutes().toString().padStart(2, '0')}`;
                
                const relativeTime = formatRelativeTime(item.pubDate);
                const statusTagHtml = getSuicideStatusHtml(item._status);
                const districtTagHtml = getDistrictTag(item.title);

                html += `
                    <a href="${item.link}" target="_blank" class="news-item">
                        <div class="news-date">
                            <span>ç™¼ä½ˆæ™‚é–“ï¼š</span>${relativeTime} 
                            <span class="absolute-time">(${dateStr})</span>
                            ${statusTagHtml}
                            ${districtTagHtml}
                        </div>
                        <div class="news-title">${item.title}</div>
                    </a>
                `;
            });
            html += '</div>';
            container.innerHTML = html;
        }

        // å¼•å…¥äº† Debounce å‡½æ•¸ï¼Œä»¥å„ªåŒ–æœç´¢å’Œç¯©é¸çš„æ€§èƒ½
        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }


        async function fetchNewsForSource(sourceObj) {
            // æ§‹å»º Google RSS URL
            const fullQuery = `site:${sourceObj.site} ${sourceObj.querySuffix} ${BASE_KEYWORDS}`;
            const googleRssUrl = `https://news.google.com/rss/search?q=${encodeURIComponent(fullQuery)}&hl=zh-HK&gl=HK&ceid=HK:zh-Hant`;
            // ä½¿ç”¨ rss2json ä»£ç†
            const apiUrl = `https://api.rss2json.com/v1/api.json?rss_url=${encodeURIComponent(googleRssUrl)}`;
            
            try {
                const response = await fetch(apiUrl);
                const data = await response.json();

                if (data.status !== 'ok') throw new Error('API Error');

                let items = data.items.filter(item => {
                    const title = item.title;
                    
                    // A. å¿…é ˆåŒ…å«è‡ªæ®º/è‡ªæ®˜é—œéµè© (å¼·åˆ¶æª¢æŸ¥ - ç¢ºä¿çµæœé«˜åº¦ç›¸é—œ)
                    const hasSuicideKW = SUICIDE_KEYWORDS.some(k => title.includes(k));
                    if (!hasSuicideKW) return false; 

                    // B. æ’é™¤ç„¡é—œè©
                    const hasExcludeKW = EXCLUDE_WORDS.some(w => title.includes(w));
                    if (hasExcludeKW) return false;

                    return true;
                });

                items = items.map(item => ({
                    ...item,
                    _status: getSuicideStatusString(item.title),
                    _date: new Date(item.pubDate) // è½‰æ›ç‚º Date å°è±¡ç”¨æ–¼æ’åº
                }));
                
                return items;

            } catch (error) {
                console.error(`Error fetching news for ${sourceObj.site}:`, error);
                return 'ERROR'; 
            }
        }
        
        function renderAllColumns() {
            const statusFilter = document.getElementById('status-filter').value;
            const sortOrder = document.getElementById('sort-order').value;
            const keyword = document.getElementById('keyword-search').value.toLowerCase(); 
            
            updateControlIndicators(); 

            SOURCES.forEach(source => {
                const rawItems = ALL_NEWS_DATA[source.id];
                
                if (rawItems === 'ERROR') {
                    document.getElementById(source.id).innerHTML = '<div class="error">æ•¸æ“šè¼‰å…¥å¤±æ•— (APIç¹å¿™æˆ–ç¶²çµ¡éŒ¯èª¤)ã€‚<br>è«‹ç¨å¾Œé‡è©¦ã€‚</div>';
                    return;
                }
                
                if (!rawItems) return; // å°šæœªè¼‰å…¥

                // 1. é—œéµè©éæ¿¾
                let filteredItems = rawItems.filter(item => {
                    return item.title.toLowerCase().includes(keyword.toLowerCase());
                });

                // 2. ç‹€æ…‹éæ¿¾
                let filterValue = statusFilter; 

                if (filterValue !== 'all') {
                    filteredItems = filteredItems.filter(item => item._status === filterValue);
                }

                // 3. æ’åº
                let sortedItems = filteredItems.sort((a, b) => {
                    return sortOrder === 'newest' ? b._date - a._date : a._date - b._date; 
                });

                renderNewsList(source.id, sortedItems);
            });
            
            setupLinkPreload();
        }


        // -----------------------------------------------------
        // ğŸš€ åˆå§‹åŒ–å‡½å¼ 
        // -----------------------------------------------------
        async function init() {
            // è¨­ç½®è™›æ“¬å¤©æ°£æ•¸æ“š (ä¸å¯¦éš›å‘¼å«å¤©æ°£ API)
            const weatherElement = document.getElementById('current-weather');
            if (weatherElement) {
                weatherElement.innerHTML = 'æ™´æœ— â˜€ï¸ 24Â°C (æ¿•åº¦ 45%)<br><span style="font-size: 0.8em; font-weight: 500; color: #95a5a6;">(å¤©æ°£æ•¸æ“šç‚ºå¿«ç…§)</span>';
            }
            
            // è¨­ç½®æ™‚é–“æ›´æ–°
            updateDateTime();
            setInterval(updateDateTime, 1000); 
            
            // é¡¯ç¤ºéª¨æ¶å±
            SOURCES.forEach(source => renderSkeletonScreen(source.id));

            // ä¸¦è¡Œç²å–æ‰€æœ‰æ•¸æ“š
            const fetchPromises = SOURCES.map(source => fetchNewsForSource(source));
            const results = await Promise.all(fetchPromises);

            // å­˜å„²æ•¸æ“š
            SOURCES.forEach((source, index) => {
                ALL_NEWS_DATA[source.id] = results[index];
            });

            // è¨­ç½®ç¯©é¸/æœç´¢äº‹ä»¶ç›£è½å™¨ (ä½¿ç”¨ Debounce å„ªåŒ–)
            const debouncedRender = debounce(renderAllColumns, 300);

            document.getElementById('status-filter').addEventListener('change', renderAllColumns);
            document.getElementById('sort-order').addEventListener('change', renderAllColumns);
            document.getElementById('keyword-search').addEventListener('input', debouncedRender);
            document.getElementById('reset-filters-btn').addEventListener('click', resetFilters);
            
            // é¦–æ¬¡æ¸²æŸ“æ‰€æœ‰æ•¸æ“š
            renderAllColumns();

            // è¨­ç½®å…¶ä»– UI é‚è¼¯
            setupSearchClear();
            setupBackToTop();
            
            // æ›´æ–°æœ€å¾Œæ›´æ–°æ™‚é–“
            const now = new Date();
            document.getElementById('last-update').textContent = `æ•¸æ“šæ›´æ–°æ–¼ï¼š${now.toLocaleDateString('zh-HK')} ${now.toLocaleTimeString('zh-HK')}`;
        }

        // é é¢åŠ è¼‰å®Œæˆå¾ŒåŸ·è¡Œåˆå§‹åŒ–
        window.addEventListener('load', init);
    </script>
</body>
</html>